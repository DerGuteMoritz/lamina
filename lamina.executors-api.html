<html>
  <head>
    <title>lamina.executors API reference (lamina)</title>
    <link href="static/favicon.png" rel="icon" />
    <link href="static/favicon.png" rel="shortcut icon" />
    <link media="all" type="text/css" href="static/clojure.css" rel="stylesheet" />
    <link media="all" type="text/css" href="static/wiki.css" rel="stylesheet" />
    <link media="all" type="text/css" href="static/internal.css" rel="stylesheet" />
    <!-- TODO: are we using these (from clojure.org)? If so, add the files -->
    <script src="file/view/code_highlighter.js" type="text/javascript"></script>
    <script src="file/view/clojure.js" type="text/javascript"></script>
    <style>.menuWrapper{height: 36px;}</style>
    <!--[if lte IE 6]>
    <link rel="stylesheet" href="http://www.wikispaces.com/_/2009051601/s/internal_ie.css" type="text/css" />
    <![endif]-->
  </head>
<!--
This document was auto-generated from the source by the clojure autodoc system.
To report errors or ask questions about the overall documentation structure, formatting,
etc., contact Tom Faulhaber (google mail name: tomfaulhaber).
For errors in the documentation of a particular namespace, contact the author of that
namespace.
-->
  <body>
    <div id="AllContentContainer">
      <div id="Header">
	<a id="Logo" href="index.html"><img alt="Clojure" height="100" width="100" src="static/clojure-icon.gif" /></a>
	<h1><a title="page header title" id="page-header" href="index.html">lamina</a></h1>
      </div>
      <div id="leftcolumn"><div style="text-align: center;"></div>
<div class="menu">
  <div class="WikiCustomNav WikiElement wiki">
    <a class="wiki_link" href="index.html">Overview</a><br />
    <a class="wiki_link" href="api-index.html">API Index</a><br />
    <a class="wiki_link" href="#">Namespaces:</a>
    <ul id="left-sidebar-list">
      <li><a href="lamina.api-api.html" class="wiki_link">lamina.api</a></li><li><a href="lamina.connections-api.html" class="wiki_link">lamina.connections</a></li><li><a href="lamina.core-api.html" class="wiki_link">lamina.core</a></li><li><a href="lamina.executors-api.html" class="wiki_link">lamina.executors</a></li><li><a href="lamina.trace-api.html" class="wiki_link">lamina.trace</a></li>
    </ul>
  </div>
</div>
</div>
      <div id="rightcolumn">
	<div id="Content">
	  <div class="contentBox"><div class="innerContentBox">
              <div id="content_view" class="wiki wikiPage">
                <div id="right-sidebar"><div id="toc">
  <h1 class="nopad">Table of Contents</h1>
  <div style="margin-left: 1em;" class="toc-section">
    <a href="#toc0">Overview</a>
    <div style="margin-left: 1em;" class="toc-entry">
      <a href="#lamina.executors/executor">executor</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#lamina.executors/set-default-executor">set-default-executor</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#lamina.executors/set-local-executor">set-local-executor</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#lamina.executors/thread-pool">thread-pool</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#lamina.executors/with-thread-pool">with-thread-pool</a>
    </div>
    <br />
  </div>
</div>
</div>
                <div id="content-tag"><h1 id="overview">API for <span id="namespace-name">lamina.executors</span></h1>
by <span id="author">Unknown</span><br />
<br />Usage:
<pre>
(ns your-namespace
  (:require <span id="long-name">lamina.executors</span>))
</pre><pre>
</pre><h2>Overview</h2>
<pre id="namespace-docstr"></pre>
<br />
<h2>Public Variables and Functions</h2>
<div id="var-entry">
  <br />
  <hr />
  <h2 id="lamina.executors/executor">executor</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (executor pool f)
       (executor pool f options)
</pre>
  <pre id="var-docstr">Given a thread pool and a function, returns a function that will execute that function
on a thread pool and returns a result-channel representing its eventual value.

The returned function takes a sequence of arguments as its first argument, and thread
pool configurations as an optional second argument.

&gt; (def f +)
#'f
&gt; (f 1 2)
3
&gt; (def f* (executor (thread-pool) f))
#'f*
&gt; @(f* [1 2] {:timeout 100})
3</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="lamina.executors/set-default-executor">set-default-executor</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (set-default-executor executor)
</pre>
  <pre id="var-docstr">Sets the default executor used by task.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="lamina.executors/set-local-executor">set-local-executor</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (set-local-executor executor)
</pre>
  <pre id="var-docstr">Sets the executor used by task when called within the current namespace.</pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="lamina.executors/thread-pool">thread-pool</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (thread-pool)
       (thread-pool options)
</pre>
  <pre id="var-docstr">Creates a thread pool that will grow to a specified size when necessary, and dispose
of unused threads after a certain amount of inactivity.

The following options may be specified:

:min-thread-count - the lower boundary for the thread count (defaults to 0)
:max-thread-count - the upper boundary for the thread count (defaults to Integer/MAX_VALUE)
:idle-threshold - the interval before an inactive thread is reclaimed (defaults to 60,000ms)
:name - the name used for logging
:timeout - the maximum duration a thread may be in use by a single task

under :probes, the following log channels may be specified:

:timeout   Called when a thread times out with:
             {:thread, :result, :timeout}
           By default, this will trigger a TimeoutException in the result and interrupt the
           thread.  

:timing    Called every time a task completes with:
             {:enqueued-time, :start-time, :end-time,
              :queue-duration, :execution-duration, :duration}
           All values are in milliseconds.

:state     Called every time a task is enqueued with:
             {:completed-tasks, :pending-tasks, :active-threads, :thread-count}
           </pre>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="lamina.executors/with-thread-pool">with-thread-pool</h2>
  <span id="var-type">macro</span><br />
  <pre id="var-usage">Usage: (with-thread-pool pool options &amp; body)
</pre>
  <pre id="var-docstr">Executes the body on the specified thread pool.  Returns a result-channel representing the
eventual return value.

The thread pool may be optionally followed by a map specifying options that override those
given when the thread pool was created.  If, for instance, we want to have the timeout be
100ms in this particular instance, we can use:


(with-thread-pool pool {:timeout 100}
  ...)</pre>
  
</div>


</div>
              </div>
            </div>
          </div>
	</div>
	<div id="foot">
	  <div style="text-align: center;" id="copyright">No copyright info </div>
	</div>
      </div>
      <div id="DesignedBy">Logo &amp; site design by <a title="Visit Tom Hickey's website." href="http://www.tomhickey.com">Tom Hickey</a>.<br />
      Clojure auto-documentation system by Tom Faulhaber.</div>
    </div>
    <!-- /AllContentContainer -->
  </body>

</html>